<main class="bg-[#2A2520] h-full min-h-screen">
  <!-- Hero Section -->
  <section
    id="hero"
    class="text-white flex flex-col md:flex-row p-10 md:p-20 border-t border-b border-[#D4AF37]"
  >
    <div class="text-2xl md:text-3xl space-y-4">
      <h1 class="text-3xl md:text-5xl font-bold">Welcome to Laptop Lounge</h1>
      <h2 class="text-lg md:text-xl">
        Find your next notebook for work, play, or creation. Curated laptops,
        ready to ship üíª‚ö°Ô∏è
      </h2>
    </div>
  </section>

  <!-- Browse by Genre -->
  <section id="main" class="text-white text-xl p-5 md:p-10 space-y-5">
    <h1 class="text-2xl md:text-3xl font-semibold">Browse by Category</h1>

    <!-- Search Active Message -->
    <div
      *ngIf="laptopService.searchQuery()"
      class="bg-[#D4AF37] text-black px-4 py-2 rounded-xl flex items-center justify-between"
    >
      <span
        >Searching for: <strong>{{ laptopService.searchQuery() }}</strong></span
      >
      <button
        (click)="clearSearch()"
        class="ml-4 px-3 py-1 bg-[#2A2520] text-white rounded-lg hover:bg-[#3A322B] transition"
      >
        Clear Search
      </button>
    </div>

    <!-- Categories -->
    <div class="overflow-x-auto">
      <ul class="flex space-x-4 md:space-x-10 mt-5">
        <li
          *ngFor="let cat of categories"
          (click)="selectCategory(cat)"
          [class]="
            selectedCategory === cat
              ? 'px-4 md:px-6 py-2 cursor-pointer transition rounded-xl whitespace-nowrap bg-[#D4AF37] text-black font-semibold'
              : 'px-4 md:px-6 py-2 cursor-pointer hover:bg-[#D4AF37] hover:text-black transition rounded-xl bg-[#5A534C] whitespace-nowrap'
          "
        >
          {{ cat }}
        </li>
      </ul>
    </div>

    <!-- Brands -->
    <div class="overflow-x-auto mt-4">
      <ul class="flex space-x-4 md:space-x-10 mt-2">
        <li
          *ngFor="let brand of brands"
          (click)="selectBrand(brand)"
          [class]="
            selectedBrand === brand
              ? 'px-4 md:px-6 py-2 cursor-pointer transition rounded-xl whitespace-nowrap bg-[#D4AF37] text-black font-semibold'
              : 'px-4 md:px-6 py-2 cursor-pointer hover:bg-[#D4AF37] hover:text-black transition rounded-xl bg-[#5A534C] whitespace-nowrap'
          "
        >
          {{ brand }}
        </li>
      </ul>
    </div>

    <!-- Laptops Grid -->
    <div class="flex justify-center mt-10">
      <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 w-full">
        <li
          *ngFor="let book of laptops"
          class="rounded-xl bg-[#3A322B] p-5 flex flex-col justify-between"
        >
          <!-- Laptop Image -->
          <div
            class="flex w-full h-80 md:h-96 items-center justify-center bg-[#2A2520] rounded-xl mb-3 overflow-hidden"
          >
            <img
              *ngIf="book.coverImage || book.image_url"
              [src]="book.coverImage || book.image_url"
              [alt]="book.Brand + ' ' + book.Model"
              class="w-full h-full object-contain"
              (error)="$event.target.src = ''"
            />
            <span
              *ngIf="!book.coverImage && !book.image_url"
              class="text-[#5A534C] text-lg"
              >No Image</span
            >
          </div>

          <!-- Laptop Info -->
          <div
            class="flex flex-col md:flex-row justify-between items-start md:items-center mb-3 space-y-2 md:space-y-0 md:space-x-2"
          >
            <div class="flex flex-col space-y-1">
              <div class="font-bold text-lg md:text-xl">
                {{ book.Brand }} {{ book.Model }}
              </div>
              <div class="text-sm opacity-80">{{ book.Spec }}</div>
              <div
                class="mt-1 text-sm w-fit px-3 py-1 rounded-xl bg-[#D4AF37] text-black"
              >
                {{ book.category || book.genre }}
              </div>
            </div>
            <div
              class="text-[#D4AF37] text-2xl md:text-3xl font-bold mt-2 md:mt-0"
            >
              {{ book.price }}$
            </div>
          </div>

          <!-- Book Description -->
          <div
            *ngIf="book.description"
            class="text-sm opacity-70 mb-3 line-clamp-3"
          >
            {{ book.description }}
          </div>

          <!-- Actions -->
          <div
            class="flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-2"
          >
            <div
              class="flex-1 text-center p-3 rounded-xl bg-[#5A534C] text-white cursor-pointer hover:bg-[#D4AF37] hover:text-black transition"
              (click)="addToCart(book)"
            >
              Add to cart
            </div>
            <div
              class="flex-1 text-center p-3 rounded-xl bg-[#D4AF37] text-black cursor-pointer hover:bg-[#5A534C] hover:text-white transition"
              (click)="purchase(book)"
            >
              Purchase
            </div>
          </div>
        </li>
      </ul>
    </div>
  </section>

  <!-- Add-to-cart toast -->
  <div *ngIf="toastVisible" class="fixed right-5 bottom-5 z-50">
    <div
      class="px-4 py-2 rounded-xl bg-[#D4AF37] text-black font-semibold shadow-lg"
    >
      {{ toastMessage }}
    </div>
  </div>
</main>
